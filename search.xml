<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo Markdown è¿›é˜¶</title>
    <url>/2021/01/25/Hexo-Markdown-%E8%BF%9B%E9%98%B6/</url>
    <content><![CDATA[<h1 id="noteæ ‡ç­¾"><a class="markdownIt-Anchor" href="#noteæ ‡ç­¾"></a> Noteæ ‡ç­¾</h1>
<blockquote>
<p>ã€å†…å®¹æ¥æºã€‘Hexoè‡ªå¸¦è¿˜æ˜¯NexTä¸»é¢˜è‡ªå¸¦æˆ‘ä¸æ¸…æ¥šï¼Œå¯ä»¥è‚¯å®šä¸æ˜¯æ’ä»¶<br />
ä½†æ˜¯æˆ‘çŸ¥é“è¿™ç§å†™æ³•æ˜¯å¸¸ç”¨çš„ä¸€ç§markdownå†™æ³•<br />
åœ¨ <strong>VuePress</strong> ä¸­ä¸€æ ·çš„æ˜¯è¿™ç§å†™æ³•</p>
</blockquote>
<p>é€šè¿‡ note æ ‡ç­¾å¯ä»¥ä¸ºæ®µè½ <strong>æ·»åŠ èƒŒæ™¯è‰²</strong> ï¼Œç”¨äºè¿›è¡Œå†…å®¹çš„æç¤º<br />
ä¸€å…±æœ‰å¦‚ä¸‹äº”ç§ï¼š <code>primary</code> <code>success</code> <code>info</code> <code>warning</code> <code>danger</code></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note [class] %&#125;</span><br><span class="line">è¯·æŠŠâ€˜classâ€™æ›¿æ¢æˆä¸Šé¢5ä¸ªçš„ä¸€ä¸ª (æ”¯æŒè¡Œå†…æ ‡ç­¾)</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note default"><p>default</p>
</div>
<div class="note primary"><p>primary</p>
</div>
<div class="note success"><p>success</p>
</div>
<div class="note info"><p>infoÂ·</p>
</div>
<div class="note warning"><p>warning</p>
</div>
<div class="note danger"><p>danger</p>
</div>
<p>å¦‚æœä¸Šè¿°çš„ <code>class</code> æ ‡ç­¾å†™æˆå…¶ä»–çš„ä»»ä½•å†…å®¹ï¼Œæ¯”å¦‚è¿™æ ·</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æŠ˜å çš„å†…å®¹ %&#125;</span><br><span class="line">æ˜¯ä¸æ˜¯éå¸¸çš„æœ‰è¶£ï¼Œé€‚åˆæè¿°æ‰©å±•çš„çŸ¥è¯†</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<details class="note "><summary><p>ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æŠ˜å çš„å†…å®¹</p>
</summary>
<p>æ˜¯ä¸æ˜¯éå¸¸çš„æœ‰è¶£ï¼Œé€‚åˆæè¿°æ‰©å±•çš„çŸ¥è¯†</p>

</details>
<h1 id="ä»£ç å—-è¿›é˜¶-æœªå®Œæˆ"><a class="markdownIt-Anchor" href="#ä»£ç å—-è¿›é˜¶-æœªå®Œæˆ"></a> ä»£ç å— è¿›é˜¶ (æœªå®Œæˆ)</h1>
<div class="note warning"><p>è¿™é‡Œè¿˜æœ‰ä¸€äº›æ’ä»¶å’Œæ‰©å±•åŠŸèƒ½è¿˜æ²¡æœ‰å®Œå…¨çš„æ•´åˆå¥½<br />
éœ€è¦è¿›ä¸€æ­¥çš„è¿›è¡Œä¼˜åŒ–</p>
</div>
<ul>
<li>langugaeï¼šè¯­è¨€åç§°ï¼Œå¼•å¯¼æ¸²æŸ“å¼•æ“æ­£ç¡®è§£æå¹¶é«˜äº®æ˜¾ç¤ºå…³é”®å­—</li>
<li>titleï¼šä»£ç å—æ ‡é¢˜ï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å·¦ä¸Šè§’</li>
<li>urlï¼šé“¾æ¥åœ°å€ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š link text åˆ™ä¼šåœ¨å³ä¸Šè§’æ˜¾ç¤º link</li>
<li>link textï¼šé“¾æ¥åç§°ï¼ŒæŒ‡å®š url åæœ‰æ•ˆï¼Œå°†ä¼šæ˜¾ç¤ºåœ¨å³ä¸Šè§’</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â€‹&#96;&#96;&#96; [language] [title] [url] [link text]</span><br><span class="line">code snippet</span><br><span class="line">â€‹&#96;&#96;&#96;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­</p>
<figure class="highlight yml"><figcaption><span>_config.yml diff</span></figcaption><table><tr><td class="code"><pre><span class="line"> <span class="attr">highlight:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">line_number:</span> <span class="literal">false</span></span><br><span class="line"><span class="bullet">-</span>  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line"><span class="string">+</span>  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">tab_replace:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>line_number:false</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Class <span class="title">HelloWorldClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.Out.printl(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>å†™ä½œ</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Self Reflection / 2020.08~2021.02</title>
    <url>/2021/01/25/Self-Reflection-2020-08-2021-02/</url>
    <content><![CDATA[<blockquote>
<p>In the end of a semester, a student will be requested to send a self reflection email with a sample as below:</p>
<p>For the self reflection, I hope you can answer the following questions:</p>
<ul>
<li>
<p>Did you work hard enough over the past period (i.e., past semester)? If so, illustrate the supporting evidence. If not, explain why you would have such situation and explain how you would be able to improve the situation in the next period (i.e., next semester) (with concrete action plans or things)?</p>
</li>
<li>
<p>On what aspects did you work in a <strong>desirable way</strong> over the the past period? Illustrate the details.</p>
</li>
<li>
<p>On what aspects did you work in an <strong>undesirable way</strong> over the past period? Illustrate the details. Also explain why you would have such situation and explain how you would be able to improve the situation in the upcoming period (with concrete action plans or things)?</p>
</li>
<li>
<p>Any other comments you would like to self reflect on your research activities, styles/processes, skills, and/or accomplishments or anything else in the past period, especially with respect to work hard, work smart, and work wise?</p>
</li>
</ul>
</blockquote>
<p><font size=6>This</font> semester, I think I have worked hard enough, but there is still space for improvement. From the time I chose the research topic of Taobao intelligent stress testing, I knew that it would be a highly engineered project that required a clear schedule for coding. In this semester, I was able to push the project every week according to the plan set from last week group meeting. This is an important prerequisite for ensuring the completion of the project in the three months. I think I have pushed myself enough. However, in the process of this project, due to my poor definition and understanding of the problem, I actually waste a lot of time, including trying inappropriate models (such as LightGBM, GRU and later I found this problem is actually multivariate nonlinear regression, which means all of these models do not work), and trying some approaches that are not actually related to the project (such as fuzz testing). Although these works can be regarded as a valuable experiment from my perspective, but it can also be regarded as â€œuseless workâ€, and I think it is a flag of â€œnot working hard enoughâ€. I did not think sufficiently in the early stages, which led to this â€œuseless workâ€.</p>
<p><font size=6>I</font> think I worked in a desirable way with the following two aspects: First for my internship in Alibaba, the weekly CI/CD process is my best working status. Second, since joining the ASE group, my research topic gradually focus on software engineering. Besides my internship, I began to read papers independently, especially those that were not completely related to my work, such as quantum program testing, and some papers on GUI Testing (recently Iâ€™m skimming all papers in ICSE in the past five years, and taking some notes based on my understanding). I confirm that it is very meaningful to read as many excellent papers as possible after listening to Prof. Xusheng Xiaoâ€™s sharing this week.</p>
<p><font size=6>I</font> think there are two aspects that Iâ€™m not satisfied withmyself. <strong>The first is that the time utilization is relatively low at work</strong>. I tried deep learning models and wrote preprocessing code for about a month, and took three weeks parallelizing my training process , and did engineering implementation for a month. There are three factors that lead to low efficiency: complex engineering structure, slow implementation speed, and unfamiliarity with theories. The first part is actually inevitable. For scalability and well-designed structure, Iâ€™ve sacrificed some time for encapsulating and testing. For the second and third parts, I think there is definitely room for improvement. Basically, I spend half of my time learning theories and code writings (such as selecting models, learning to write async python, web frameworks etc.), a quarter of my time testing code demos to understand knowledge and confirm code result, and the last quarter is the actual engineering part. <strong>The second is that the free time is not fully utilized</strong>, because a lot of time is spent at work and no extra time is reserved for me to learn other things. Specifically, I only read a quarter of the basic tutorials of Rust, and I did not read more than 10 papers outside of my work.</p>
<p><font size=6>Because</font> there is no course this semester, I can concentrate on some things I want to do. In my spare time, I started to read the source code of third-party libraries in Python (Tensorflow, Subprocess, Asyncio, Shutil etc.), so I can deeply understand their inner logic and master how to use it. My mathematical basis is not good, so I am also looking at some mathematical derivation related to data science (especially machine learning and linear regression analysis), although some parts are still difficult for me, but there is nothing bad about understanding the principles. In addition, under the recommendation of developers in BUPT, I started to learn the Rust programming language. Compared with other languages, the learning curve of this language is quite steep. I have not yet written projects in Rust, but at this stage I think the design and concept of Rust is more suitable for software engineering research than other languages such as C. Also I build my first â€œIn Useâ€ homepage on github (I had some personal homepage before, but they are no longer maintained just because Iâ€™m too lazy), hoping to note down some of the knowledge that Iâ€™ve learned, and gain experience.</p>
<p><font size=6>In</font> order to quickly index, I just put solid action plans here.</p>
<ul>
<li><strong>For work time utilization in UNDESIRABLE part</strong>
<ul>
<li>Note down most of the knowledge I studied into web docs, avoid forgetting and reduce time for searching and learning again. The specific action is to ensure that my homepage is updated at a regular rate. Although it is a stupid method, it is still extremely effective for me. (Work wise? I think.)</li>
<li>In terms of speed, I need more practice, and a certain amount of code must be guaranteed. The actual code of project in Alibaba intern has about 15 files, with above 2,000 LOC. The playground code for functional testing has about 5 files, with above 1,000 LOC. At least the LOC number for the next semester cannot be lower than this semester.</li>
</ul>
</li>
<li><strong>For free time allocation in UNDESIRABLE part</strong>:
<ul>
<li>My current plan is to use morning time to read papers and learn new knowledge (such as Rust ğŸ˜„) , just before working time is fine. So that my free learning time will not be squeezed by working time.</li>
<li>The time allocation at weekends has also improved to a certain extent. I now reserve Saturday as my leisure time, and regard Sunday as a weekday. I will try this schedule for a few months to see if there is any actual effect.</li>
</ul>
</li>
<li><strong>For work hard&amp;wise part:</strong>
<ul>
<li>For the scenario of determining solution, it is necessary to conduct as small experiments as possible, not engineering-level experiments, otherwise it will take a lot of time to do engineering stuff. A simple experiment is needed before the large one.</li>
<li>For scenario where â€œmultiple solutions have been determined and all need to be experimentedâ€: as above, improve my implementation speed.</li>
<li>In addition, I must fully understand the problem before I solve it. I personally find that itâ€™s helpful just describe to my goals and solutions with others and will find some flaws in my problem definition. Let ideas go through a â€œpeer reviewâ€.</li>
</ul>
</li>
</ul>
<p><font size=6><strong>ABOVE ALL: WRITE MORE, SYNC MORE, DONâ€™T BE LAZY.</strong></font></p>
<p>Honored to join the ASE group and keep improving myself !</p>
]]></content>
      <tags>
        <tag>åæ€</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/11/26/hello-world/</url>
    <content><![CDATA[<h2 id="æˆ‘ä¸ªäººå¸¸ç”¨çš„æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#æˆ‘ä¸ªäººå¸¸ç”¨çš„æŒ‡ä»¤"></a> æˆ‘ä¸ªäººå¸¸ç”¨çš„æŒ‡ä»¤</h2>
<h2 id="ä¸€é”®åˆé›†æ…ç”¨"><a class="markdownIt-Anchor" href="#ä¸€é”®åˆé›†æ…ç”¨"></a> ä¸€é”®åˆé›†ï¼ˆæ…ç”¨ï¼‰</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">git branch                         # æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git branch -r                      # æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git push origin allfile:allfile    # å°†æœ¬åœ°allfileåˆ†æ”¯pushåˆ°è¿œç¨‹allfileåˆ†æ”¯</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<h3 id="hexoçš„æœåŠ¡å™¨è°ƒè¯•æ¨¡å¼"><a class="markdownIt-Anchor" href="#hexoçš„æœåŠ¡å™¨è°ƒè¯•æ¨¡å¼"></a> hexoçš„æœåŠ¡å™¨è°ƒè¯•æ¨¡å¼</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo s --debug</span><br></pre></td></tr></table></figure>
<h3 id="hexoå†…å®¹éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒ"><a class="markdownIt-Anchor" href="#hexoå†…å®¹éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒ"></a> hexoå†…å®¹éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒ</h3>
<div class="note info"><p>è¿™é‡Œä¸Šä¼ çš„æ˜¯ç»è¿‡ç”Ÿæˆçš„æ–‡ä»¶<br />
è¯·ä¸€å®šè¦åœ¨hexoåˆå§‹é…ç½®ä¸­å®Œæˆè‡ªåŠ¨gitçš„é…ç½®æ‰èƒ½ç”¨è¿™ä¸ªå‘½ä»¤</p>
</div>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<h3 id="hexoåŸå§‹æ–‡ä»¶éƒ¨ç½²åˆ°å…¶ä»–åˆ†æ”¯"><a class="markdownIt-Anchor" href="#hexoåŸå§‹æ–‡ä»¶éƒ¨ç½²åˆ°å…¶ä»–åˆ†æ”¯"></a> hexoåŸå§‹æ–‡ä»¶éƒ¨ç½²åˆ°å…¶ä»–åˆ†æ”¯</h3>
<div class="note info"><p>è¯·ç¡®è®¤åˆ†æ”¯æƒ…å†µ</p>
</div>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch                         # æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git branch -r                      # æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span><br><span class="line">git push origin allfile:allfile    # å°†æœ¬åœ°allfileåˆ†æ”¯pushåˆ°è¿œç¨‹allfileåˆ†æ”¯</span><br></pre></td></tr></table></figure>
<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2>
<h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>é”®ç›˜layout</title>
    <url>/2020/11/26/keybord/</url>
    <content><![CDATA[<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âˆ‘</mo><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\sum (a+b)_{2}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="mop op-symbol large-op" style="position:relative;top:-0.000004999999999977245em;">âˆ‘</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>è¡Œå†…æµ‹è¯•<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>u</mi><mi>n</mi><msub><mi>c</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">func_{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">u</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<h1 id="75"><a class="markdownIt-Anchor" href="#75"></a> 75</h1>
<p><a href="https://imgchr.com/i/DBnJe0"><img src="https://s3.ax1x.com/2020/11/26/DBnJe0.md.png" alt="DBnJe0.md.png" /></a></p>
<h1 id="60"><a class="markdownIt-Anchor" href="#60"></a> 60</h1>
<p><a href="https://imgchr.com/i/DBn8Lq"><img src="https://s3.ax1x.com/2020/11/26/DBn8Lq.md.png" alt="DBn8Lq.md.png" /></a></p>
<h1 id="980"><a class="markdownIt-Anchor" href="#980"></a> 980</h1>
<p><a href="https://imgchr.com/i/DBn3yn"><img src="https://s3.ax1x.com/2020/11/26/DBn3yn.md.png" alt="DBn3yn.md.png" /></a></p>
<h1 id="alice"><a class="markdownIt-Anchor" href="#alice"></a> Alice</h1>
<p><a href="https://imgchr.com/i/DBn1Qs"><img src="https://s3.ax1x.com/2020/11/26/DBn1Qs.md.png" alt="DBn1Qs.md.png" /></a></p>
<h1 id="minila"><a class="markdownIt-Anchor" href="#minila"></a> minila</h1>
<p><a href="https://imgchr.com/i/DBnQzj"><img src="https://s3.ax1x.com/2020/11/26/DBnQzj.md.png" alt="DBnQzj.md.png" /></a></p>
<h1 id="65"><a class="markdownIt-Anchor" href="#65"></a> 65</h1>
<p><a href="https://imgchr.com/i/DBnMWQ"><img src="https://s3.ax1x.com/2020/11/26/DBnMWQ.md.png" alt="DBnMWQ.md.png" /></a></p>
]]></content>
  </entry>
  <entry>
    <title>å¸¸ç”¨ç«™ç‚¹</title>
    <url>/2020/11/26/%E5%B8%B8%E7%94%A8%E7%AB%99%E7%82%B9/</url>
    <content><![CDATA[<h1 id="å®ç”¨å·¥å…·"><a class="markdownIt-Anchor" href="#å®ç”¨å·¥å…·"></a> å®ç”¨å·¥å…·</h1>
<p>åœ¨çº¿LaTeXå…¬å¼ç¼–è¾‘å™¨ï¼š<a href="https://www.latexlive.com/">https://www.latexlive.com/</a></p>
<p>è¶…è¯¦ç»†hexoå»ºç«™ï¼š<a href="https://segmentfault.com/a/1190000017986794">https://segmentfault.com/a/1190000017986794</a></p>
]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>ç½‘å€æ”¶è—</tag>
        <tag>æ”¶è—</tag>
      </tags>
  </entry>
  <entry>
    <title>a fast view of FastAPI</title>
    <url>/2021/01/07/a-fast-view-of-FastAPI/</url>
    <content><![CDATA[<h1 id="å¼•è¨€"><a class="markdownIt-Anchor" href="#å¼•è¨€"></a> å¼•è¨€</h1>
<p>è¿™ä¸ªæ•™ç¨‹æ˜¯</p>
<h1 id="å¿…è¦çš„ä¸‹è½½"><a class="markdownIt-Anchor" href="#å¿…è¦çš„ä¸‹è½½"></a> å¿…è¦çš„ä¸‹è½½</h1>
<p>ç¬¬ä¸€ä¸ªæ˜¯è‡ªå·±ï¼Œç¬¬äºŒä¸ªæ˜¯æœåŠ¡å™¨ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¼„Formå’Œæ–‡ä»¶çš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install fastapi</span><br><span class="line">pip install uvicorn[standard]</span><br><span class="line">pip install python-multipart</span><br></pre></td></tr></table></figure>
<h1 id="å¦‚ä½•å¯åŠ¨åº”ç”¨"><a class="markdownIt-Anchor" href="#å¦‚ä½•å¯åŠ¨åº”ç”¨"></a> å¦‚ä½•å¯åŠ¨åº”ç”¨</h1>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">uvicorn main:app --reload</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­mainæ˜¯ä½ çš„pyæ–‡ä»¶åç§°ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œappæ˜¯åœ¨å†…éƒ¨æ³¨å†Œçš„åº”ç”¨</p>
<h1 id="çŸ¥è¯†ç»“æ„"><a class="markdownIt-Anchor" href="#çŸ¥è¯†ç»“æ„"></a> çŸ¥è¯†ç»“æ„</h1>
<h1 id="å¿«é€Ÿå¯åŠ¨"><a class="markdownIt-Anchor" href="#å¿«é€Ÿå¯åŠ¨"></a> å¿«é€Ÿå¯åŠ¨</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">root</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello World&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°"><a class="markdownIt-Anchor" href="#è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°"></a> è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°</h1>
<div class="note info"><p>ğŸ’¯ é™¤éå£°æ˜äº†æ˜¯Optinalï¼Œå¦åˆ™æ²¡æœ‰é»˜è®¤å€¼çš„å‚æ•°éƒ½æ˜¯å¿…é¡»çš„å‚æ•°</p>
<p>å¼•è‡ªï¼ˆçŸ¥åæ‘¸é±¼ä¸“å®¶ï¼šNitrogenousFishï¼‰</p>
</div>
<h2 id="è·¯å¾„å‚æ•°"><a class="markdownIt-Anchor" href="#è·¯å¾„å‚æ•°"></a> è·¯å¾„å‚æ•°</h2>
<h3 id="å£°æ˜è·¯å¾„å‚æ•°"><a class="markdownIt-Anchor" href="#å£°æ˜è·¯å¾„å‚æ•°"></a> å£°æ˜è·¯å¾„å‚æ•°</h3>
<ol>
<li>åœ¨<strong>å‡½æ•°è£…é¥°å™¨</strong>é‡Œé¢åŠ ä¸Š<code>&#123;var&#125;</code></li>
<li>åœ¨ä¸‹æ–¹å‡½æ•°ä¸­çš„å‚æ•°ä¸­ï¼Œå¡«å†™å˜é‡åç§°å’Œç±»å‹ï¼Œç”¨å†’å·åˆ†å‰²<code>(var:str)</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_user</span>(<span class="params">user_id: <span class="built_in">str</span></span>):</span></span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ”‘ è¦ç‚¹ï¼šè·¯å¾„å‚æ•°çš„<strong>é¡ºåºå¾ˆé‡è¦</strong>ï¼šå¦‚æœæŠŠä¸‹é¢çš„<code>/me</code>å’Œ<code>/&#123;user_id&#125;</code>å†™åäº†ï¼Œé‚£ä¹ˆåœ¨è¯·æ±‚<code>/me</code>çš„æ—¶å€™ï¼Œä¼šè¢«<code>/&#123;user_id&#125;</code>å…ˆè·å–åˆ°</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users/me&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_user_me</span>():</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;user_id&quot;</span>: <span class="string">&quot;the current user&quot;</span>&#125;</span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/users/&#123;user_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_user</span>(<span class="params">user_id: <span class="built_in">str</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;user_id&quot;</span>: user_id&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŒ…å«è·¯å¾„çš„è·¯å¾„å‚æ•°æ”¯æŒä½†æ˜¯å¹³å¸¸æœ€å¥½åˆ«è¿™ä¹ˆå†™"><a class="markdownIt-Anchor" href="#åŒ…å«è·¯å¾„çš„è·¯å¾„å‚æ•°æ”¯æŒä½†æ˜¯å¹³å¸¸æœ€å¥½åˆ«è¿™ä¹ˆå†™"></a> åŒ…å«è·¯å¾„çš„è·¯å¾„å‚æ•°ï¼šæ”¯æŒï¼Œä½†æ˜¯å¹³å¸¸æœ€å¥½åˆ«è¿™ä¹ˆå†™</h3>
<p>è¯¦æƒ…å‚è§ï¼š<a href="https://fastapi.tiangolo.com/zh/tutorial/path-params/#_14">https://fastapi.tiangolo.com/zh/tutorial/path-params/#_14</a></p>
<h2 id="æŸ¥è¯¢å‚æ•°ä¸æ˜¯è·¯å¾„å‚æ•°çš„å‚æ•°"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢å‚æ•°ä¸æ˜¯è·¯å¾„å‚æ•°çš„å‚æ•°"></a> æŸ¥è¯¢å‚æ•°ï¼šä¸æ˜¯è·¯å¾„å‚æ•°çš„å‚æ•°</h2>
<p>ã€å®šä¹‰ã€‘å£°æ˜ä¸å±äºè·¯å¾„å‚æ•°çš„å…¶ä»–å‡½æ•°å‚æ•°æ—¶ï¼Œå®ƒä»¬å°†è¢«è‡ªåŠ¨è§£é‡Šä¸º&quot;æŸ¥è¯¢å­—ç¬¦ä¸²&quot;å‚æ•°</p>
<p><strong>æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œè¿™äº›é”®å€¼å¯¹ä½äº URL çš„ <code>ï¼Ÿ</code> ä¹‹åï¼Œå¹¶ä»¥ <code>&amp;</code> ç¬¦å·åˆ†éš”ã€‚</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:8000&#x2F;items&#x2F;?skip&#x3D;0&amp;limit&#x3D;10</span><br></pre></td></tr></table></figure>
<p>ä»–ä»¬åŸå§‹éƒ½æ˜¯strç±»å‹ï¼Œå½“ä¸ºå®ƒä»¬å£°æ˜äº† Python ç±»å‹ä¹‹åï¼Œå°±èƒ½å¤Ÿè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¹¶ä¸”é’ˆå¯¹è¯¥ç±»å‹è¿›è¡Œæ ¡éªŒ</p>
<h3 id="å£°æ˜æŸ¥è¯¢å‚æ•°"><a class="markdownIt-Anchor" href="#å£°æ˜æŸ¥è¯¢å‚æ•°"></a> å£°æ˜æŸ¥è¯¢å‚æ•°</h3>
<p>å£°æ˜æ–¹æ³•å’Œè·¯å¾„å‚æ•°ç¬¬äºŒæ­¥ä¸€æ ·ï¼Œå°±æ˜¯ä¸ä¼šåœ¨å‡½æ•°è£…é¥°å™¨é‡Œé¢åŠ ä¸Šå¯¹åº”çš„å†…å®¹</p>
<h3 id="æŸ¥è¯¢å‚æ•°-å¯é€‰ä¸é»˜è®¤å€¼"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢å‚æ•°-å¯é€‰ä¸é»˜è®¤å€¼"></a> æŸ¥è¯¢å‚æ•° å¯é€‰ä¸é»˜è®¤å€¼</h3>
<p>æŸ¥è¯¢å‚æ•°å¦‚æœæœ‰ï¼Œå°±æ˜¯å¯¹åº”çš„å€¼ï¼›å¦‚æœæ²¡æœ‰æŸ¥è¯¢ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤å€¼</p>
<p>ã€<strong>å£°æ˜æŸ¥è¯¢å‚æ•°å¯é€‰</strong>ã€‘ï¼šå£°æ˜ä¸ºOptinalï¼Œè®¾ç½®é»˜è®¤å€¼ä¸ºNone</p>
<p>ã€å£°æ˜æŸ¥è¯¢å‚æ•°é»˜è®¤å€¼ã€‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line">...				<span class="comment"># è¿™é‡Œçš„ q å’Œ short éƒ½æ˜¯å¯é€‰å‚æ•°</span></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_item</span>(<span class="params">item_id: <span class="built_in">str</span>, q: Optional[<span class="built_in">str</span>] = <span class="literal">None</span>, short: <span class="built_in">bool</span> = <span class="literal">False</span></span>):</span></span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥è¯¢å‚æ•°å¿…é€‰"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢å‚æ•°å¿…é€‰"></a> æŸ¥è¯¢å‚æ•°å¿…é€‰</h3>
<p>ã€å£°æ˜æŸ¥è¯¢å‚æ•°å¿…é€‰ã€‘ï¼šå°±ä¸è¦è®¾å®šé»˜è®¤å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_user_item</span>(<span class="params">item_id: <span class="built_in">str</span>, needy: <span class="built_in">str</span></span>):</span>		<span class="comment"># è¿™é‡Œçš„needyå°±æ˜¯å¿…é€‰å‚æ•°			</span></span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥è¯¢å‚æ•°-å¿…é€‰-å¯é€‰-é»˜è®¤å€¼-æ€»ç»“"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢å‚æ•°-å¿…é€‰-å¯é€‰-é»˜è®¤å€¼-æ€»ç»“"></a> æŸ¥è¯¢å‚æ•° å¿…é€‰-å¯é€‰-é»˜è®¤å€¼ æ€»ç»“</h3>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰3ä¸ªæŸ¥è¯¢å‚æ•°ï¼š</p>
<ul>
<li><code>needy</code>ï¼Œä¸€ä¸ªå¿…éœ€çš„ <code>str</code> ç±»å‹å‚æ•°ã€‚</li>
<li><code>skip</code>ï¼Œä¸€ä¸ªé»˜è®¤å€¼ä¸º <code>0</code> çš„ <code>int</code> ç±»å‹å‚æ•°ã€‚</li>
<li><code>limit</code>ï¼Œä¸€ä¸ªå¯é€‰çš„ <code>int</code> ç±»å‹å‚æ•°ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line">app = FastAPI()</span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_user_item</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    item_id: <span class="built_in">str</span>, needy: <span class="built_in">str</span>, skip: <span class="built_in">int</span> = <span class="number">0</span>, limit: Optional[<span class="built_in">int</span>] = <span class="literal">None</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>):</span></span><br><span class="line">    item = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;needy&quot;</span>: needy, <span class="string">&quot;skip&quot;</span>: skip, <span class="string">&quot;limit&quot;</span>: limit&#125;</span><br><span class="line">    <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<h1 id="è¯·æ±‚ä½“-post"><a class="markdownIt-Anchor" href="#è¯·æ±‚ä½“-post"></a> è¯·æ±‚ä½“ ï¼ˆPOSTï¼‰</h1>
<p>è¯·æ±‚ä½“ï¼šå®¢æˆ·ç«¯å‘é€ç»™ API çš„æ•°æ®</p>
<p>ç›¸åº”ä½“ï¼šAPI å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®</p>
<p>è¯·æ±‚ä½“é™¤äº†POSTè¿˜æœ‰PUTï¼ŒDELETEï¼ŒPATCHç­‰</p>
<h2 id="åˆ›å»ºè¯·æ±‚ä½“pydantic"><a class="markdownIt-Anchor" href="#åˆ›å»ºè¯·æ±‚ä½“pydantic"></a> åˆ›å»ºè¯·æ±‚ä½“â€”â€”Pydantic</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel					<span class="comment">#é¦–å…ˆï¼Œä½ éœ€è¦ä» pydantic ä¸­å¯¼å…¥ BaseModelï¼š</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>(<span class="params">BaseModel</span>):</span>							<span class="comment">#ç„¶åï¼Œå°†ä½ çš„æ•°æ®æ¨¡å‹å£°æ˜ä¸ºç»§æ‰¿è‡ª BaseModel çš„ç±»</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: Optional[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: Optional[<span class="built_in">float</span>] = <span class="literal">None</span>					<span class="comment">#ä½¿ç”¨æ ‡å‡†çš„ Python ç±»å‹æ¥å£°æ˜æ‰€æœ‰å±æ€§</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="comment"># item_idè·¯å¾„å‚æ•°ï¼Œå¿…é€‰ï¼›itemè¯·æ±‚ä½“ï¼Œå¿…é€‰ï¼›qæŸ¥è¯¢å‚æ•°ï¼Œå¯é€‰&amp;é»˜è®¤None</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">create_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item, q: Optional[<span class="built_in">str</span>] = <span class="literal">None</span></span>):</span></span><br><span class="line">    result = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, **item.<span class="built_in">dict</span>()&#125;</span><br><span class="line">    <span class="keyword">if</span> q:</span><br><span class="line">        result.update(&#123;<span class="string">&quot;q&quot;</span>: q&#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h3 id="å¦‚ä½•è§£æ-è·¯å¾„å‚æ•°-æŸ¥è¯¢å‚æ•°-è¯·æ±‚ä½“"><a class="markdownIt-Anchor" href="#å¦‚ä½•è§£æ-è·¯å¾„å‚æ•°-æŸ¥è¯¢å‚æ•°-è¯·æ±‚ä½“"></a> å¦‚ä½•è§£æ è·¯å¾„å‚æ•° æŸ¥è¯¢å‚æ•° è¯·æ±‚ä½“</h3>
<p>å‡½æ•°å‚æ•°å°†ä¾æ¬¡æŒ‰å¦‚ä¸‹è§„åˆ™è¿›è¡Œè¯†åˆ«ï¼š</p>
<ul>
<li>å¦‚æœåœ¨<strong>è·¯å¾„</strong>ä¸­ä¹Ÿå£°æ˜äº†è¯¥å‚æ•°ï¼Œå®ƒå°†è¢«ç”¨ä½œè·¯å¾„å‚æ•°ã€‚</li>
<li>å¦‚æœå‚æ•°å±äº<strong>å•ä¸€ç±»å‹</strong>ï¼ˆæ¯”å¦‚ <code>int</code>ã€<code>float</code>ã€<code>str</code>ã€<code>bool</code> ç­‰ï¼‰å®ƒå°†è¢«è§£é‡Šä¸º<strong>æŸ¥è¯¢</strong>å‚æ•°ã€‚</li>
<li>å¦‚æœå‚æ•°çš„ç±»å‹è¢«å£°æ˜ä¸ºä¸€ä¸ª <strong>Pydantic æ¨¡å‹</strong>ï¼Œå®ƒå°†è¢«è§£é‡Šä¸º<strong>è¯·æ±‚ä½“</strong>ã€‚</li>
</ul>
<h3 id="pydanticæ¨¡å‹å¥—å¨ƒè¯·æ±‚ä½“-åµŒå¥—æ¨¡å‹"><a class="markdownIt-Anchor" href="#pydanticæ¨¡å‹å¥—å¨ƒè¯·æ±‚ä½“-åµŒå¥—æ¨¡å‹"></a> Pydanticæ¨¡å‹å¥—å¨ƒï¼ˆè¯·æ±‚ä½“-åµŒå¥—æ¨¡å‹ï¼‰</h3>
<p>ä¸ç»†å—¦äº†ï¼Œç›´æ¥çœ‹å§ï¼Œå’Œä½ æƒ³çš„å·®ä¸å¤šï½</p>
<p>åŒ…å«æœ‰modelå¥—modelï¼Œmodelå¥—List(model)ï¼Œå°±æ˜¯List(model)</p>
<p><a href="https://fastapi.tiangolo.com/zh/tutorial/body-nested-models/">https://fastapi.tiangolo.com/zh/tutorial/body-nested-models/</a></p>
<h3 id="pydanticæ¨¡å‹æ³¨é‡Šå¼ºåŒ–æ¨¡å¼çš„é¢å¤–ä¿¡æ¯-ä¾‹å­"><a class="markdownIt-Anchor" href="#pydanticæ¨¡å‹æ³¨é‡Šå¼ºåŒ–æ¨¡å¼çš„é¢å¤–ä¿¡æ¯-ä¾‹å­"></a> Pydanticæ¨¡å‹æ³¨é‡Šå¼ºåŒ–ï¼ˆæ¨¡å¼çš„é¢å¤–ä¿¡æ¯ - ä¾‹å­ï¼‰</h3>
<p><a href="https://fastapi.tiangolo.com/zh/tutorial/schema-extra-example/">https://fastapi.tiangolo.com/zh/tutorial/schema-extra-example/</a></p>
<p>æ¨èå¤§æ¦‚å¼„æ‡‚äº†å…¨éƒ¨å†…å®¹å†æ¥çœ‹ã€‚å’Œè¿è¡ŒåŠŸèƒ½æ— å…³ï¼Œæ˜¯æ³¨é‡Šå’Œå¯è¯»æ€§çš„ä¸€ä¸ªä¾‹å­</p>
<h2 id="åˆ›å»ºè¯·æ±‚ä½“body-è¯·æ±‚ä½“ä¸­çš„å•ä¸€å€¼"><a class="markdownIt-Anchor" href="#åˆ›å»ºè¯·æ±‚ä½“body-è¯·æ±‚ä½“ä¸­çš„å•ä¸€å€¼"></a> åˆ›å»ºè¯·æ±‚ä½“â€”â€”Body è¯·æ±‚ä½“ä¸­çš„å•ä¸€å€¼</h2>
<h3 id="bodyåŸºç¡€å•ç‹¬é”®"><a class="markdownIt-Anchor" href="#bodyåŸºç¡€å•ç‹¬é”®"></a> BodyåŸºç¡€â€”â€”å•ç‹¬é”®</h3>
<p>å½“ä½ çš„è¯·æ±‚ä½“ä¸­åªéœ€è¦ä¸€ä¸ªå•ç‹¬æ•°å€¼ï¼ˆè¯·æ±‚ä¸­çš„ä¸€ä¸ªå•ç‹¬çš„é”®ï¼‰çš„æ—¶å€™ï¼Œä¸ç”¨å†å»ºä¸€ä¸ªclassäº†ï¼Œç›´æ¥<code>from fastapi import Body</code></p>
<p>è¿™æ ·çš„ä¸€ä¸ªç¨‹åºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Body, FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: Optional[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: Optional[<span class="built_in">float</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    full_name: Optional[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">update_item</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    item_id: <span class="built_in">int</span>, item: Item, user: User, importance: <span class="built_in">int</span> = Body(<span class="params">...</span>)</span></span></span><br><span class="line"><span class="function"><span class="params"></span>):</span></span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item, <span class="string">&quot;user&quot;</span>: user, <span class="string">&quot;importance&quot;</span>: importance&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<p>æœŸæœ›åˆ°è¿™æ ·çš„è¯·æ±‚ä½“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;item&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;Foo&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;The pretender&quot;,</span><br><span class="line">        &quot;price&quot;: 42.0,</span><br><span class="line">        &quot;tax&quot;: 3.2</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;user&quot;: &#123;</span><br><span class="line">        &quot;username&quot;: &quot;dave&quot;,</span><br><span class="line">        &quot;full_name&quot;: &quot;Dave Grohl&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;importance&quot;: 5</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»™å•ä¸ªpydanticåµŒå…¥è¯·æ±‚ä½“å‚æ•°"><a class="markdownIt-Anchor" href="#ç»™å•ä¸ªpydanticåµŒå…¥è¯·æ±‚ä½“å‚æ•°"></a> ç»™å•ä¸ªPydanticåµŒå…¥è¯·æ±‚ä½“å‚æ•°</h3>
<p>å‡è®¾<strong>ä½ åªæœ‰ä¸€ä¸ª</strong>æ¥è‡ª Pydantic æ¨¡å‹ <code>Item</code> çš„è¯·æ±‚ä½“å‚æ•° <code>item</code>ï¼Œä½ æƒ³è¦å¦‚ä¸‹å½¢å¼çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;item&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;Foo&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;The pretender&quot;,</span><br><span class="line">        &quot;price&quot;: 42.0,</span><br><span class="line">        &quot;tax&quot;: 3.2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œä¸æ˜¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;Foo&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;The pretender&quot;,</span><br><span class="line">    &quot;price&quot;: 42.0,</span><br><span class="line">    &quot;tax&quot;: 3.2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ éœ€è¦åœ¨æœ€åæ·»åŠ ç­‰äºBodyï¼Œå¹¶ä¸”åœ¨æœ€ååŠ ä¸Šembed=Trueï¼š<code>item: Item = Body(..., embed=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Body, FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: Optional[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: Optional[<span class="built_in">float</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">update_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item = Body(<span class="params">..., embed=<span class="literal">True</span></span>)</span>):</span>		<span class="comment"># çœ‹è¿™é‡Œï½</span></span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<h1 id="å‚æ•°æ ¡éªŒè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°"><a class="markdownIt-Anchor" href="#å‚æ•°æ ¡éªŒè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°"></a> å‚æ•°æ ¡éªŒï¼ˆè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°ï¼‰</h1>
<p>ğŸ”‘ <strong>é‡ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p><strong>æŸ¥è¯¢å‚æ•°æ˜¯Queryç±»</strong></p>
</li>
<li>
<p><strong>è·¯å¾„å‚æ•°æ˜¯Pathç±»ï¼Œ</strong></p>
</li>
<li>
<p><strong>Bodyç±»è¯·æ±‚ä½“-å†…éƒ¨è‡ªå¸¦æ ¡éªŒæ¥å£</strong></p>
</li>
<li>
<p>**Pydanticè¯·æ±‚ä½“-ç”¨ç”¨ Pydantic çš„ <code>Field</code>**ç±»åœ¨Pydanticæ¨¡å‹å†…éƒ¨å£°æ˜æ ¡éªŒå’Œå…ƒæ•°æ®</p>
</li>
</ul>
<p>ä¸‹æ–‡æ‰€æœ‰å†…å®¹å°†ä»¥Queryç±»ä¸ºä¾‹ï¼Œé»˜è®¤éƒ½æ˜¯æŸ¥è¯¢å‚æ•°</p>
<h2 id="å‚æ•°æ ¡éªŒåŸºç¡€ç”¨æ³•æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å‚æ•°æ ¡éªŒåŸºç¡€ç”¨æ³•æŸ¥è¯¢"></a> å‚æ•°æ ¡éªŒåŸºç¡€ç”¨æ³•â€”â€”æŸ¥è¯¢</h2>
<ul>
<li>
<p>é¦–å…ˆå¯¼å…¥Query</p>
</li>
<li>
<p>æŠŠQueryè®¾ç½®ä¸ºé»˜è®¤å€¼</p>
<ul>
<li>å…¶ä¸­<code>Query(None)</code>ç­‰ä»·äº<code>None</code>ï¼Œéšåæˆ‘ä»¬å°±å¯ä»¥ä¼ é€’æ›´å¤šçš„å‚æ•°ç»™<code>Query()</code></li>
<li>å¯ä»¥ç»™Queryå¸¦æœ‰å¤šä¸ªæ ¡éªŒå†…å®¹ï¼š<code>Query(None, min_length=3, max_length=50)</code></li>
<li>å¯ä»¥å®šä¹‰ä¸€ä¸ªå‚æ•°å€¼éœ€è¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼<code>Query(None, min_length=3, max_length=50, regex=&quot;^fixedquery$&quot;)</code></li>
<li>å¯ä»¥è¿›è¡Œæ•°å€¼æ ¡éªŒï¼š
<ul>
<li><code>item_id: int = Path(..., title=&quot;The ID of the item to get&quot;, ge=1)</code>è·¯å¾„å‚æ•°è¦å¤§äºç­‰äº1</li>
<li>geå¤§äºç­‰äºï¼Œgtå¤§äºï¼Œeqç­‰äºï¼Œleå°äºç­‰äºï¼Œltå°äº</li>
</ul>
</li>
<li>Queryä¸­<strong>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼</strong>ï¼šè¿™é‡ŒNoneå°±æ˜¯è¿™ä¸ªQueryçš„é»˜è®¤å€¼</li>
<li>å¦‚æœè¿™ä¸ª<strong>å‚æ•°æ˜¯å¿…é¡»çš„</strong>ï¼Œé‚£ä¹ˆé»˜è®¤å‚æ•°è®¾ç½®ä¸º<code>...</code> ï¼ˆpythonå…³é”®å­—ï¼šçœç•¥å·ï¼‰ï¼šå¦‚<code>Query(..., min_length=3)</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ”‘ <strong>é‡ç‚¹</strong></p>
<p>è·¯å¾„å‚æ•°æ€»æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒå¿…é¡»æ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æ‰€ä»¥ï¼Œä½ åº”è¯¥åœ¨å£°æ˜æ—¶ä½¿ç”¨ <code>...</code> å°†å…¶æ ‡è®°ä¸ºå¿…éœ€å‚æ•°ã€‚</p>
<p>ç„¶è€Œï¼Œå³ä½¿ä½ ä½¿ç”¨ <code>None</code> å£°æ˜è·¯å¾„å‚æ•°æˆ–è®¾ç½®ä¸€ä¸ªå…¶ä»–é»˜è®¤å€¼ä¹Ÿä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼Œå®ƒä¾ç„¶ä¼šæ˜¯å¿…éœ€å‚æ•°</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, Query			<span class="comment"># é¦–å…ˆå¯¼å…¥Query</span></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">q: Optional[<span class="built_in">str</span>] = Query(<span class="params"><span class="literal">None</span>, max_length=<span class="number">50</span></span>)</span>):</span>	<span class="comment">#æŠŠQueryè®¾ç½®ä¸ºé»˜è®¤å€¼</span></span><br><span class="line">    results = &#123;<span class="string">&quot;items&quot;</span>: [&#123;<span class="string">&quot;item_id&quot;</span>: <span class="string">&quot;Foo&quot;</span>&#125;, &#123;<span class="string">&quot;item_id&quot;</span>: <span class="string">&quot;Bar&quot;</span>&#125;]&#125;</span><br><span class="line">    <span class="keyword">if</span> q:</span><br><span class="line">        results.update(&#123;<span class="string">&quot;q&quot;</span>: q&#125;)</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<h2 id="å‚æ•°æ ¡éªŒçš„å†™æ³•é¡ºåºæ’åˆ—"><a class="markdownIt-Anchor" href="#å‚æ•°æ ¡éªŒçš„å†™æ³•é¡ºåºæ’åˆ—"></a> å‚æ•°æ ¡éªŒçš„å†™æ³•é¡ºåºæ’åˆ—</h2>
<p>âš ï¸ å¦‚æœä½ å°†å¸¦æœ‰ã€Œé»˜è®¤å€¼ã€çš„å‚æ•°æ”¾åœ¨æ²¡æœ‰ã€Œé»˜è®¤å€¼ã€çš„å‚æ•°ä¹‹å‰ï¼ŒPython å°†ä¼šæŠ¥é”™ã€‚</p>
<p>å¦‚æœåŒæ—¶æ··æœ‰è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°ï¼ˆæ²¡æœ‰é»˜è®¤å€¼ï¼‰ï¼Œè·¯å¾„å‚æ•°æœ‰Pathè¿›è¡Œæ ¡éªŒï¼Œä½†æ˜¯æŸ¥è¯¢å‚æ•°æ²¡æœ‰Queryï¼Œè¿™æ ·å†™æ²¡æœ‰é—®é¢˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># q æ˜¯æ²¡æœ‰é»˜è®¤å€¼çš„æŸ¥è¯¢å‚æ•°ï¼Œitem_idæ˜¯æœ‰é»˜è®¤å€¼çš„è·¯å¾„å‚æ•°</span></span><br><span class="line"><span class="comment"># è¿™ç§å†™æ³•æ²¡æœ‰é—®é¢˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">q: <span class="built_in">str</span>, item_id: <span class="built_in">int</span> = Path(<span class="params">..., title=<span class="string">&quot;The ID of the item to get&quot;</span></span>)</span>):</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœåè¿‡æ¥ï¼Œè·¯å¾„å‚æ•°æ”¾åœ¨å‰é¢ï¼Œå°±ä¼šæŠ¥é”™</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">item_id: <span class="built_in">int</span> = Path(<span class="params">..., title=<span class="string">&quot;The ID of the item to get&quot;</span>, q: <span class="built_in">str</span></span>)</span>):</span></span><br><span class="line"><span class="comment"># SyntaxError: non-default argument follows default argument</span></span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šåŠ ä¸€ä¸ª<code>*</code>å‘Šè¯‰pythonè§£é‡Šå™¨ï¼ŒæŠŠåé¢çš„æ‰€æœ‰å‚æ•°å½“æˆ<code>kwargs</code>æ¥çœ‹å¾…ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">*, item_id: <span class="built_in">int</span> = Path(<span class="params">..., title=<span class="string">&quot;The ID of the item to get&quot;</span></span>), q: <span class="built_in">str</span></span>):</span></span><br></pre></td></tr></table></figure>
<p><strong>è¿˜æ˜¯æ¨èæŠŠè¿™äº›æ²¡æœ‰é»˜è®¤å€¼çš„å¯é€‰é¡¹éƒ½è®¾ç½®ä¸Šä¸€ä¸ªé»˜è®¤å€¼å§ï¼Œåæ­£æ˜¯æˆ‘æˆ‘å°±è¿™ä¹ˆå¹²ï¼ˆè¦æ˜¯å®Œå…¨ä¸å…³å¿ƒæ€§èƒ½çš„è¯ï¼‰</strong></p>
<h2 id="æ ¡éªŒå‚æ•°åˆ—è¡¨å¤šå€¼-åŸºç¡€ç”¨æ³•"><a class="markdownIt-Anchor" href="#æ ¡éªŒå‚æ•°åˆ—è¡¨å¤šå€¼-åŸºç¡€ç”¨æ³•"></a> æ ¡éªŒå‚æ•°åˆ—è¡¨/å¤šå€¼ åŸºç¡€ç”¨æ³•</h2>
<blockquote>
<p>ğŸ’¯ æƒ³æ€ä¹ˆå¥—å¨ƒï¼Œå°±æ€ä¹ˆå¥—å¨ƒ~</p>
<p>å¼•è‡ªï¼ˆçŸ¥åæ‘¸é±¼ä¸“å®¶ï¼šNitrogenousFishï¼‰</p>
</blockquote>
<p><code>Optional[List[str]] = Query(None)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List, Optional</span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, Query</span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">q: Optional[List[<span class="built_in">str</span>]] = Query(<span class="params"><span class="literal">None</span></span>)</span>):</span>		<span class="comment"># çœ‹è¿™é‡Œçœ‹è¿™é‡Œ</span></span><br><span class="line">    query_items = &#123;<span class="string">&quot;q&quot;</span>: q&#125;</span><br><span class="line">    <span class="keyword">return</span> query_items</span><br></pre></td></tr></table></figure>
<p>å‡è®¾è¯·æ±‚çš„URLæ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8000&#x2F;items&#x2F;?q&#x3D;foo&amp;q&#x3D;bar</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå¾—åˆ°çš„å“åº”å°±æ˜¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;q&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;foo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bar&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ ¡éªŒå‚æ•°åˆ—è¡¨å¤šå€¼-é»˜è®¤å€¼"><a class="markdownIt-Anchor" href="#æ ¡éªŒå‚æ•°åˆ—è¡¨å¤šå€¼-é»˜è®¤å€¼"></a> æ ¡éªŒå‚æ•°åˆ—è¡¨/å¤šå€¼ é»˜è®¤å€¼</h2>
<p><code>Query([&quot;foo&quot;, &quot;bar&quot;])</code></p>
<p>æ¯”å¦‚è¿™æ ·ï½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">q: List[<span class="built_in">str</span>] = Query(<span class="params">[<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>]</span>)</span>):</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">read_items</span>(<span class="params">q: <span class="built_in">list</span> = Query(<span class="params">[]</span>)</span>):</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<code>List[int]</code> å°†æ£€æŸ¥ï¼ˆå¹¶è®°å½•åˆ°æ–‡æ¡£ï¼‰åˆ—è¡¨çš„å†…å®¹å¿…é¡»æ˜¯æ•´æ•°ã€‚ä½†æ˜¯å•ç‹¬çš„ <code>list</code> ä¸ä¼šã€‚</p>
<h2 id="field-pydanticå‚æ•°æ ¡éªŒä¸¾ä¾‹"><a class="markdownIt-Anchor" href="#field-pydanticå‚æ•°æ ¡éªŒä¸¾ä¾‹"></a> Field-Pydanticå‚æ•°æ ¡éªŒä¸¾ä¾‹</h2>
<p><strong>é¦–å…ˆå¯¼å…¥Fieldï¼šå› ä¸ºæ˜¯åœ¨pydanticå†…éƒ¨æ ¡éªŒï¼Œæ‰€ä»¥ä¸æ˜¯ä»fastapiå¯¼å…¥è€Œæ˜¯pydantic</strong></p>
<p>ç„¶åç”¨æ³•å‰©ä¸‹çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼šçœ‹Item.priceè¿™é‡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Optional</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Body, FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, Field		<span class="comment">#å¯¼å…¥Field</span></span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: Optional[<span class="built_in">str</span>] = Field(</span><br><span class="line">        <span class="literal">None</span>, title=<span class="string">&quot;The description of the item&quot;</span>, max_length=<span class="number">300</span></span><br><span class="line">    )</span><br><span class="line">    price: <span class="built_in">float</span> = Field(..., gt=<span class="number">0</span>, description=<span class="string">&quot;The price must be greater than zero&quot;</span>)</span><br><span class="line">    tax: Optional[<span class="built_in">float</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">update_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item = Body(<span class="params">..., embed=<span class="literal">True</span></span>)</span>):</span></span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€äº›æœ‰å…³å‚æ•°æ ¡éªŒçš„æŠ€æœ¯ç»†èŠ‚"><a class="markdownIt-Anchor" href="#ä¸€äº›æœ‰å…³å‚æ•°æ ¡éªŒçš„æŠ€æœ¯ç»†èŠ‚"></a> ä¸€äº›æœ‰å…³å‚æ•°æ ¡éªŒçš„æŠ€æœ¯ç»†èŠ‚</h2>
<p>å®é™…ä¸Šï¼Œ<code>Query</code>ã€<code>Path</code> å’Œå…¶ä»–ä½ å°†åœ¨ä¹‹åçœ‹åˆ°çš„ç±»ï¼Œåˆ›å»ºçš„æ˜¯ç”±ä¸€ä¸ªå…±åŒçš„ <code>Params</code> ç±»æ´¾ç”Ÿçš„å­ç±»çš„å¯¹è±¡ï¼Œè¯¥å…±åŒç±»æœ¬èº«åˆæ˜¯ Pydantic çš„ <code>FieldInfo</code> ç±»çš„å­ç±»ã€‚</p>
<p>Pydantic çš„ <code>Field</code> ä¹Ÿä¼šè¿”å›ä¸€ä¸ª <code>FieldInfo</code> çš„å®ä¾‹ã€‚</p>
<p><code>Body</code> ä¹Ÿç›´æ¥è¿”å› <code>FieldInfo</code> çš„ä¸€ä¸ªå­ç±»çš„å¯¹è±¡ã€‚è¿˜æœ‰å…¶ä»–ä¸€äº›ä½ ä¹‹åä¼šçœ‹åˆ°çš„ç±»æ˜¯ <code>Body</code> ç±»çš„å­ç±»ã€‚</p>
<p>è¯·è®°ä½å½“ä½ ä» <code>fastapi</code> å¯¼å…¥ <code>Query</code>ã€<code>Path</code> ç­‰å¯¹è±¡æ—¶ï¼Œä»–ä»¬å®é™…ä¸Šæ˜¯è¿”å›ç‰¹æ®Šç±»çš„å‡½æ•°ã€‚</p>
<h2 id="æ ¡éªŒå‚æ•°é«˜çº§å†…å®¹"><a class="markdownIt-Anchor" href="#æ ¡éªŒå‚æ•°é«˜çº§å†…å®¹"></a> æ ¡éªŒå‚æ•°é«˜çº§å†…å®¹</h2>
<p><a href="https://fastapi.tiangolo.com/zh/tutorial/query-params-str-validations/#_9">https://fastapi.tiangolo.com/zh/tutorial/query-params-str-validations/#_9</a></p>
<ul>
<li>æ·»åŠ æ›´å¤šçš„å‚æ•°ä¿¡æ¯ titleï¼Œdescription</li>
<li>å‚æ•°åˆ«å alias</li>
<li>æŒ‡å®šå‚æ•°å°†ä¼šè¢«å¼ƒç”¨ deprecated</li>
</ul>
<h1 id=""><a class="markdownIt-Anchor" href="#"></a> </h1>
<h1 id="æœ‰å…³ç±»å‹æƒ³è¯´çš„ä¸€äº›äº‹æƒ…"><a class="markdownIt-Anchor" href="#æœ‰å…³ç±»å‹æƒ³è¯´çš„ä¸€äº›äº‹æƒ…"></a> æœ‰å…³ç±»å‹æƒ³è¯´çš„ä¸€äº›äº‹æƒ…</h1>
<h2 id="åˆ›å»ºæšä¸¾ç±»å‹"><a class="markdownIt-Anchor" href="#åˆ›å»ºæšä¸¾ç±»å‹"></a> åˆ›å»ºæšä¸¾ç±»å‹</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"><span class="comment">#æšä¸¾ç±»å‹ç»§æ‰¿è‡ªstrå’ŒEnumï¼›ç»§æ‰¿strï¼ŒAPIæ–‡æ¡£å°†èƒ½å¤ŸçŸ¥é“è¿™äº›å€¼å¿…é¡»ä¸º string ç±»å‹å¹¶ä¸”èƒ½å¤Ÿæ­£ç¡®åœ°å±•ç¤ºå‡ºæ¥</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelName</span>(<span class="params"><span class="built_in">str</span>, Enum</span>):</span>			</span><br><span class="line">    alexnet = <span class="string">&quot;alexnet&quot;</span></span><br><span class="line">    resnet = <span class="string">&quot;resnet&quot;</span></span><br><span class="line">    lenet = <span class="string">&quot;lenet&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç”¨æ³•</span></span><br><span class="line">a = <span class="string">&#x27;alexnet&#x27;</span></span><br><span class="line">print(a == ModelName.alexnet)       <span class="comment"># True</span></span><br><span class="line">print(<span class="built_in">type</span>(ModelName.alexnet))      <span class="comment"># &lt;enum &#x27;ModelName&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="pydanticæ”¯æŒæ›´å¤šçš„ç±»å‹"><a class="markdownIt-Anchor" href="#pydanticæ”¯æŒæ›´å¤šçš„ç±»å‹"></a> pydanticæ”¯æŒæ›´å¤šçš„ç±»å‹</h2>
<p><strong>åŸºç¡€ï¼š</strong></p>
<p>å¸¸è§çš„int, bool, stréƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜</p>
<p>åœ¨typingä¸­impost List Setä¹‹ç±»çš„ç±»å‹ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜</p>
<p><strong>è¿›é˜¶ï¼š</strong></p>
<p>æ¯”å¦‚UUIDï¼Œbytesï¼Œdatetime.datetimeï¼Œdatetime.date</p>
<p>æ›´å…¨çš„pydanticæ•°æ®ç±»å‹çœ‹è¿™é‡Œï¼š<a href="https://pydantic-docs.helpmanual.io/usage/types/">https://pydantic-docs.helpmanual.io/usage/types/</a></p>
<h1 id="ä¸€äº›æœ‰å…³httpçš„äº‹æƒ…ä½†æ˜¯ä½œä¸ºä¸€ä¸ªapiæ²¡æœ‰ä»€ä¹ˆéœ€è¦å…³å¿ƒçš„åœ°æ–¹"><a class="markdownIt-Anchor" href="#ä¸€äº›æœ‰å…³httpçš„äº‹æƒ…ä½†æ˜¯ä½œä¸ºä¸€ä¸ªapiæ²¡æœ‰ä»€ä¹ˆéœ€è¦å…³å¿ƒçš„åœ°æ–¹"></a> ä¸€äº›æœ‰å…³HTTPçš„äº‹æƒ…ä½†æ˜¯ä½œä¸ºä¸€ä¸ªAPIæ²¡æœ‰ä»€ä¹ˆéœ€è¦å…³å¿ƒçš„åœ°æ–¹</h1>
<p>ã€cookieå‚æ•°ã€‘<a href="https://fastapi.tiangolo.com/zh/tutorial/cookie-params/">https://fastapi.tiangolo.com/zh/tutorial/cookie-params/</a></p>
<p>ã€å“åº”æ¨¡å‹ã€‘<a href="https://fastapi.tiangolo.com/zh/tutorial/response-model/">https://fastapi.tiangolo.com/zh/tutorial/response-model/</a></p>
<p>ã€é¢å¤–çš„æ¨¡å‹ã€‘<a href="https://fastapi.tiangolo.com/zh/tutorial/extra-models/">https://fastapi.tiangolo.com/zh/tutorial/extra-models/</a></p>
<p>ã€å“åº”çŠ¶æ€ç ã€‘<a href="https://fastapi.tiangolo.com/zh/tutorial/response-status-code/">https://fastapi.tiangolo.com/zh/tutorial/response-status-code/</a></p>
<p>ä¸€çœ‹å°±æ‡‚ï¼Œå°±è¿™ä¹ˆå†™ï¼š<code>@app.post(&quot;/items/&quot;, status_code=201)</code></p>
<p>ä¸ºäº†è‡ªåŠ¨ä»£ç è¡¥å…¨ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼šfastapi.status</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, status</span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&quot;</span>, status_code=status.HTTP_201_CREATED</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">blabla</span>():</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>ã€è¡¨å•ã€‘<a href="https://fastapi.tiangolo.com/zh/tutorial/request-forms/">https://fastapi.tiangolo.com/zh/tutorial/request-forms/</a></p>
<p>æä¾›APIä¸éœ€è¦å“åº”è¡¨å•ï¼ˆç¡®ä¿¡ï¼‰</p>
<h2 id="æ–‡ä»¶"><a class="markdownIt-Anchor" href="#æ–‡ä»¶"></a> æ–‡ä»¶</h2>
<p>æœ‰ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯byteï¼Œä¸€ä¸ªæ˜¯<strong>UploadFile</strong>ï¼Œæ¨èç”¨åä¸€ä¸ª</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, File, UploadFile</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¨å¤§æœ¨å¤§</span></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/files/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">create_file</span>(<span class="params">file: <span class="built_in">bytes</span> = File(<span class="params">...</span>)</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;file_size&quot;</span>: <span class="built_in">len</span>(file)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é’ˆä¸æˆ³ï½</span></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/uploadfile/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">create_upload_file</span>(<span class="params">file: UploadFile = File(<span class="params">...</span>)</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;filename&quot;</span>: file.filename&#125;</span><br></pre></td></tr></table></figure>
<p>UploadFileæœ‰ä¸€äº›å±æ€§å’Œå¼‚æ­¥æ–¹æ³•ï½ç‚¹è¿™é‡Œçœ‹ç®€ä»‹</p>
<p><a href="https://fastapi.tiangolo.com/zh/tutorial/request-files/#uploadfile">https://fastapi.tiangolo.com/zh/tutorial/request-files/#uploadfile</a></p>
<h1 id="åè®°"><a class="markdownIt-Anchor" href="#åè®°"></a> åè®°</h1>
<p>åé¢è¿˜æœ‰ä¸€äº›å†…å®¹ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯JSONï¼ŒMiddlewareï¼Œå’ŒDebugging</p>
<p>JSONå¤§æ¦‚è¯´äº†æ˜¯æ€ä¹ˆå¤„ç†JSONè¯·æ±‚ä¹‹ç±»çš„ã€‚</p>
<p>Middlewareç›¸å½“äºæ˜¯ä¸€ä¸ªæ‰¹å¤„ç†ï¼Œèƒ½å¤Ÿåœ¨enduserå’ŒæœåŠ¡å™¨ä¹‹é—´æ‹¦ä¸‹æ¥åšç»Ÿä¸€çš„è¾“å…¥é¢„å¤„ç†å’Œè¾“å‡ºé¢„å¤„ç†</p>
<p>Debuggingè®²äº†æ€ä¹ˆåœ¨IDEé‡Œé¢å¸®ä½ è°ƒè¯•</p>
<ul>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/handling-errors/">Handling Errors</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/path-operation-configuration/">Path Operation Configuration</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/encoder/">JSON Compatible Encoder</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/body-updates/">Body - Updates</a></li>
<li>Dependencies
<ul>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/">Dependencies - First Steps</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/classes-as-dependencies/">Classes as Dependencies</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/sub-dependencies/">Sub-dependencies</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/dependencies-in-path-operation-decorators/">Dependencies in path operation decorators</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/global-dependencies/">Global Dependencies</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/dependencies/dependencies-with-yield/">Dependencies with yield</a></li>
</ul>
</li>
<li>Security
<ul>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/security/">Security Intro</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/security/first-steps/">Security - First Steps</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/security/get-current-user/">Get Current User</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/security/simple-oauth2/">Simple OAuth2 with Password and Bearer</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/security/oauth2-jwt/">OAuth2 with Password (and hashing), Bearer with JWT tokens</a></li>
</ul>
</li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/middleware/">Middleware</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/cors/">CORS (Cross-Origin Resource Sharing)</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/sql-databases/">SQL (Relational) Databases</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/bigger-applications/">Bigger Applications - Multiple Files</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/background-tasks/">Background Tasks</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/metadata/">Metadata and Docs URLs</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/static-files/">Static Files</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/testing/">Testing</a></li>
<li><a href="https://fastapi.tiangolo.com/zh/tutorial/debugging/">Debugging</a><a href="https://fastapi.tiangolo.com/zh/tutorial/debugging/">https://fastapi.tiangolo.com/zh/tutorial/debugging/</a>)</li>
</ul>
]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
</search>
